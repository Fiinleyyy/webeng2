name: Validate Branch Name

on:
  create:
    branches:
      - '*'

jobs:
  validate-branch-name:
    runs-on: ubuntu-latest
    steps:
      - name: Check if branch name matches allowed patterns
        run: |
          echo "Branch ref: $GITHUB_REF"
          BRANCH_NAME="${GITHUB_REF#refs/heads/}"

          if [[ "$BRANCH_NAME" =~ ^(feature|bugfix|fix|hotfix|chore|test)/.+$ ]]; then
            echo "✅ Branch name '$BRANCH_NAME' is valid."
          else
            echo "❌ Branch name '$BRANCH_NAME' is invalid. Use one of: feature/, bugfix/, fix/, hotfix/, chore/, test/"
            exit 1
          fi
